"use strict";const E=require("react/jsx-runtime"),s=require("react"),A=require("flatpickr"),D=["onCreate","onDestroy"],k=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],S=(e,t)=>(k.forEach(r=>{const o=t[r],n=e[r];if(o){n&&!Array.isArray(n)?e[r]=[e[r]]:e[r]||(e[r]=[]);const h=Array.isArray(o)?o:[o];e[r].length===0?e[r]=h:e[r].push(...h)}}),k.forEach(r=>{delete t[r]}),D.forEach(r=>{delete t[r]}),e),j=e=>{const t=s.useMemo(()=>({...e}),[e]),{defaultValue:r,options:o={},value:n,children:h,render:x,onCreate:u,onDestroy:f}=t,g=s.useMemo(()=>S(o,t),[o,t]),l=s.useRef(null),c=s.useRef(void 0);s.useImperativeHandle(e.ref,()=>({get flatpickr(){return c.current}}),[]),s.useEffect(()=>{const i=()=>{g.onClose=g.onClose||(()=>{var a;(a=l.current)!=null&&a.blur&&l.current.blur()}),c.current=((A==null?void 0:A.default)||A)(l.current,g),u==null||u(c.current)},y=()=>{f==null||f(c.current),c.current&&c.current.destroy(),c.current=void 0};return i(),()=>{y()}},[g,u,f]),s.useEffect(()=>{var i;if(c.current){const y=Object.getOwnPropertyNames(g);for(let a=y.length-1;a>=0;a--){const m=y[a];let C=g[m];(C==null?void 0:C.toString())!==((i=c.current.config[m])==null?void 0:i.toString())&&(k.includes(m)&&!Array.isArray(C)&&(C=[C]),c.current.set(m,C))}n!==void 0&&n!==c.current.input.value&&c.current.setDate(n,!1)}},[g,n]);const b=s.useCallback(i=>{l.current=i},[]);if(x)return x({...t,defaultValue:r,value:n},b);const R=s.useCallback(i=>{var y,a;e&&e.onChange&&(Array.isArray(e==null?void 0:e.onChange)?(y=e==null?void 0:e.onChange)==null||y.forEach(()=>[new Date(i.target.value)],(n==null?void 0:n.toString())||""):typeof e.onChange=="function"&&((a=e==null?void 0:e.onChange)==null||a.call(e,[new Date(i.target.value)],(n==null?void 0:n.toString())||"",c.current)))},[e,n]);return o.wrap?E.jsx("div",{className:"flatpickr",ref:b,children:h}):E.jsx("input",{onChange:R,...t,value:n==null?void 0:n.toString(),defaultValue:r,ref:b})};module.exports=j;
//# sourceMappingURL=react-flatpickr.cjs.map
